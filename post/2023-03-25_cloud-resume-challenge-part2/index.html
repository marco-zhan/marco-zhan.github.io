<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:site_name" content="Marco's Tech Blog"><meta property="og:type" content="article"><meta property="og:image" content="https://blog.marcozh.com///header_image.jpeg"><meta property="twitter:image" content="https://blog.marcozh.com///header_image.jpeg"><meta name=title content="The Cloud Resume Challenge, Part 2 - Hosting Static Webpage with AWS S3, CI/CD in AWS and Frontend"><meta property="og:title" content="The Cloud Resume Challenge, Part 2 - Hosting Static Webpage with AWS S3, CI/CD in AWS and Frontend"><meta property="twitter:title" content="The Cloud Resume Challenge, Part 2 - Hosting Static Webpage with AWS S3, CI/CD in AWS and Frontend"><meta name=description content="This post talks about how to set up CI/CD in AWS, how to host Static webpage with AWS S3 and create a React app"><meta property="og:description" content="This post talks about how to set up CI/CD in AWS, how to host Static webpage with AWS S3 and create a React app"><meta property="twitter:description" content="This post talks about how to set up CI/CD in AWS, how to host Static webpage with AWS S3 and create a React app"><meta property="twitter:card" content="summary"><meta name=keyword content="Marco, Tech, AWS, Kubernetes, Docker"><link rel="shortcut icon" href=/img/favicon.ico><title>The Cloud Resume Challenge, Part 2 - Hosting Static Webpage with AWS S3, CI/CD in AWS and Frontend | Marco's Tech Blog</title><link rel=canonical href=/post/2023-03-25_cloud-resume-challenge-part2/><link rel=stylesheet href=/css/bootstrap.min.css><link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css><link rel=stylesheet href=/css/zanshang.css><link href=https://cdn.jsdelivr.net/gh/FortAwesome/Font-Awesome@5.15.1/css/all.css rel=stylesheet type=text/css><script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js></script>
<script src=/js/hux-blog.min.js></script>
<script src=/js/lazysizes.min.js></script></head><nav class="navbar navbar-default navbar-custom navbar-fixed-top"><div class=container-fluid><div class="navbar-header page-scroll"><button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span></button>
<a class=navbar-brand href=/>Marco's Tech Blog</a></div><div id=huxblog_navbar><div class=navbar-collapse><ul class="nav navbar-nav navbar-right"><li><a href=/>All Posts</a></li><li><a href=/categories/aws>aws</a></li><li><a href=/categories/general>general</a></li><li><a href=https://resume.marcozh.com>Resume</a></li><li><a href=/search><i class="fa fa-search"></i></a></li></ul></div></div></div></nav><script>var $body=document.body,$toggle=document.querySelector(".navbar-toggle"),$navbar=document.querySelector("#huxblog_navbar"),$collapse=document.querySelector(".navbar-collapse");$toggle.addEventListener("click",handleMagic);function handleMagic(){$navbar.className.indexOf("in")>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf("in")<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script><style type=text/css>header.intro-header{background-image:url(/header_image.jpeg)}</style><header class=intro-header><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class=post-heading><div class=tags><a class=tag href=/tags/aws title=AWS>AWS</a>
<a class=tag href=/tags/cloud title=Cloud>Cloud</a>
<a class=tag href=/tags/ci/cd title=CI/CD>CI/CD</a></div><h1>The Cloud Resume Challenge, Part 2 - Hosting Static Webpage with AWS S3, CI/CD in AWS and Frontend</h1><h2 class=subheading></h2><span class=meta>Posted by
Marco
on
Saturday, March 25, 2023</span></div></div></div></div></header><article><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container"><h2 id=frontend>Frontend</h2><p>The frontend is pretty straight forward, I used React for writing up my resume webpage, but you can choose from
any JavaScript framework of your preference. I am not going to talk too much on frontend because this is not the main
focus of this challenge.</p><h2 id=cicd>CI/CD</h2><p>I used AWS CodePipeline for CI/CD of this challenge. The CI/CD pipeline is triggered by code change in the nominated code
repository, in my case this is on AWS CodeCommit, but you can use GitHub or other Git services. When the pipeline is triggered,
it will initiate the CodeBuild stage, which we will build the React app. The artifacts from the build stage is then passed on to
the deploy stage, which we will deploy the built app to AWS S3.</p><p>We will need to create build_spec.yml file to put in the build steps for our project and also specifies the output of the
CodeBuild stage, below is the build_spec I used</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#ae81ff>0.2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>phases</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>install</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>commands</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>echo &#34;Entered the install phase...&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>apt-get update -y</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>cd cloud-resume-frontend</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>npm install</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>commands</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>echo &#34;Entered the build phase...&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>npm run build</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>echo &#34;Finished the build phase...&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>post_build</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>commands</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>echo &#34;Entered the post-build phase&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>echo &#34;Finished the post-build phase&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>artifacts</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>files</span>:
</span></span><span style=display:flex><span>    - <span style=color:#e6db74>&#34;**/*&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>base-directory</span>: <span style=color:#e6db74>&#34;cloud-resume-frontend/build&#34;</span> <span style=color:#75715e># output everything from the built app</span>
</span></span></code></pre></div><p>We will also need to set up the role in order for our pipeline to use access other AWS services, e.g. S3
Below is the configuration of our AWS CodePipeline in AWS CloudFormation</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>Resources</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>CloudResumeCodePipeline</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::CodePipeline::Pipeline</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>CloudResumeCodePipeline</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>RoleArn</span>:
</span></span><span style=display:flex><span>        !<span style=color:#ae81ff>GetAtt CloudResumeCodePipelineRole.Arn</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Stages</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>Source</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Actions</span>:
</span></span><span style=display:flex><span>            - <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>SourceAction</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>ActionTypeId</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>Category</span>: <span style=color:#ae81ff>Source</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>Owner</span>: <span style=color:#ae81ff>AWS</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>Provider</span>: <span style=color:#ae81ff>CodeCommit</span> <span style=color:#75715e># GitHub, BitBucket etc.</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>Version</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>OutputArtifacts</span>:
</span></span><span style=display:flex><span>                -
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>SourceArtifact</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>Configuration</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>RepositoryName</span>: <span style=color:#ae81ff>cloud-resume </span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>BranchName</span>: <span style=color:#ae81ff>master</span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>CodeBuild</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Actions</span>:
</span></span><span style=display:flex><span>            - <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>CodeBuildAction</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>InputArtifacts</span>:
</span></span><span style=display:flex><span>                -
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>SourceArtifact</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>ActionTypeId</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>Category</span>: <span style=color:#ae81ff>Build</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>Owner</span>: <span style=color:#ae81ff>AWS</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>Provider</span>: <span style=color:#ae81ff>CodeBuild</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>Version</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>OutputArtifacts</span>:
</span></span><span style=display:flex><span>                  -
</span></span><span style=display:flex><span>                    <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>CodeBuildArtifacts</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>Configuration</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>ProjectName</span>: !<span style=color:#ae81ff>Ref CloudResumeCodeBuildProject</span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>CodeDeploy</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Actions</span>:
</span></span><span style=display:flex><span>            - <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>CodeDeployAction</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>ActionTypeId</span>:
</span></span><span style=display:flex><span>                <span style=color:#f92672>Category</span>: <span style=color:#ae81ff>Deploy</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>Owner</span>: <span style=color:#ae81ff>AWS</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>Provider</span>: <span style=color:#ae81ff>S3</span>
</span></span><span style=display:flex><span>                <span style=color:#f92672>Version</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>InputArtifacts</span>: 
</span></span><span style=display:flex><span>                -
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>CodeBuildArtifacts</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>Configuration</span>:
</span></span><span style=display:flex><span>                  <span style=color:#f92672>BucketName</span>: !<span style=color:#ae81ff>Ref CloudResumeOutputArtifactsBucket</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Extract</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ArtifactStore</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>S3</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>Location</span>:
</span></span><span style=display:flex><span>          !<span style=color:#ae81ff>Ref CloudResumeOutputArtifactsBucket</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#75715e># Our CodeBuild Project, we will need to specify the VM type, and the steps for our build stage</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>CloudResumeCodeBuildProject</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::CodeBuild::Project</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>Artifacts</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>CODEPIPELINE</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Description</span>: <span style=color:#ae81ff>Cloud Resume CodeBuild Project</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Environment</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>ComputeType</span>: <span style=color:#ae81ff>BUILD_GENERAL1_SMALL</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>Image</span>: <span style=color:#ae81ff>aws/codebuild/standard:6.0-23.02.16</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>LINUX_CONTAINER</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>PrivilegedMode</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Name</span>: <span style=color:#ae81ff>cloud-resume-build-project</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>ServiceRole</span>:
</span></span><span style=display:flex><span>            !<span style=color:#ae81ff>Ref CloudResumeCodeBuildRole</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Source</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>CODEPIPELINE</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>BuildSpec</span>: <span style=color:#ae81ff>./cloudformation/codebuild/cloud_resume_build_spec.yml</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>QueuedTimeoutInMinutes</span>: <span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#f92672>CloudResumeCodeBuildRole</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::IAM::Role</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>AssumeRolePolicyDocument</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>Version</span>: <span style=color:#e6db74>2012-10-17</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Statement</span>:
</span></span><span style=display:flex><span>          - <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Principal</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>Service</span>:
</span></span><span style=display:flex><span>              - <span style=color:#ae81ff>codebuild.amazonaws.com</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Action</span>:
</span></span><span style=display:flex><span>            - <span style=color:#ae81ff>sts:AssumeRole</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Description</span>: <span style=color:#ae81ff>IAM Role for Cloud Resume CodeBuild</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Path</span>: <span style=color:#e6db74>&#39;/&#39;</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Policies</span>:
</span></span><span style=display:flex><span>          - <span style=color:#f92672>PolicyName</span>: <span style=color:#ae81ff>root</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>PolicyDocument</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>Version</span>: <span style=color:#e6db74>&#39;2012-10-17&#39;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>Statement</span>:
</span></span><span style=display:flex><span>                - <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Action</span>:
</span></span><span style=display:flex><span>                    - <span style=color:#ae81ff>codebuild:*</span>
</span></span><span style=display:flex><span>                    - <span style=color:#ae81ff>logs:*</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;*&#39;</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>Resource</span>: <span style=color:#e6db74>&#39;*&#39;</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#f92672>CloudResumeCodePipelineRole</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Type</span>: <span style=color:#e6db74>&#39;AWS::IAM::Role&#39;</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>AssumeRolePolicyDocument</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>Version</span>: <span style=color:#e6db74>2012-10-17</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Statement</span>:
</span></span><span style=display:flex><span>          - <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Principal</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>Service</span>:
</span></span><span style=display:flex><span>              - <span style=color:#ae81ff>codepipeline.amazonaws.com</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>Action</span>: <span style=color:#e6db74>&#39;sts:AssumeRole&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>Description</span>: <span style=color:#ae81ff>IAM Role for Cloud Resume CodePipeline</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>Path</span>: <span style=color:#ae81ff>/</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>Policies</span>:
</span></span><span style=display:flex><span>          - <span style=color:#f92672>PolicyName</span>: <span style=color:#ae81ff>CloudResumeCodePipelineServicePolicy</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>PolicyDocument</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>Version</span>: <span style=color:#e6db74>2012-10-17</span>
</span></span><span style=display:flex><span>              <span style=color:#f92672>Statement</span>:
</span></span><span style=display:flex><span>                - <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Action</span>:
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codecommit:CancelUploadArchive&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codecommit:GetBranch&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codecommit:GetCommit&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codecommit:GetUploadArchiveStatus&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codecommit:UploadArchive&#39;</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Resource</span>: <span style=color:#e6db74>&#39;*&#39;</span>
</span></span><span style=display:flex><span>                - <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Action</span>:
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codedeploy:CreateDeployment&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codedeploy:GetApplicationRevision&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codedeploy:GetDeployment&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codedeploy:GetDeploymentConfig&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codedeploy:RegisterApplicationRevision&#39;</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Resource</span>: <span style=color:#e6db74>&#39;*&#39;</span>
</span></span><span style=display:flex><span>                - <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Action</span>:
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codebuild:BatchGetBuilds&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;codebuild:StartBuild&#39;</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Resource</span>: <span style=color:#e6db74>&#39;*&#39;</span>
</span></span><span style=display:flex><span>                - <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Action</span>: <span style=color:#75715e># if you want to perform action with AWS Lambda (optional)</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;lambda:InvokeFunction&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;lambda:ListFunctions&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;lambda:CreateFunction&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;lambda:UpdateFunctionConfiguration&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;lambda:UpdateFunctionCode&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;lambda:TagResource&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;lambda:PublishVersion&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;lambda:GetFunctionConfiguration&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;lambda:GetFunction&#39;</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Resource</span>: <span style=color:#e6db74>&#39;*&#39;</span>
</span></span><span style=display:flex><span>                - <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Action</span>:
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;iam:PassRole&#39;</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Resource</span>: <span style=color:#e6db74>&#39;*&#39;</span>
</span></span><span style=display:flex><span>                - <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Action</span>:
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;ec2:*&#39;</span> <span style=color:#75715e># optional</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;cloudwatch:*&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;s3:*&#39;</span>
</span></span><span style=display:flex><span>                    - <span style=color:#e6db74>&#39;cloudformation:*&#39;</span> <span style=color:#75715e>#optional</span>
</span></span><span style=display:flex><span>                  <span style=color:#f92672>Resource</span>: <span style=color:#e6db74>&#39;*&#39;</span>
</span></span></code></pre></div><h2 id=aws-s3>AWS S3</h2><p>We will use AWS S3 to store and host our resume webpage. Once the deploy stage of our CI/CD pipeline is completed, it will
store the built React app to our designated S3 bucket. Under the Properties tab of the bucket on AWS Console, on the very bottom
of the page, we can enable stable website hosting for our bucket and set the index document to index.html and save it.
After that, we can hit the url of our bucket, and we should see our resume webpage showing up.</p><p>However, as we will be using AWS CloudFront for accessing our S3 bucket, the static web hosting option of our bucket should
be turned off, and we should also specify a policy that only allows AWS CloudFront to access our bucket.</p><p>Below is the configuration of our bucket and the bucket policy required in AWS CloudFormation</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>Resources</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>CloudResumeOutputArtifactsBucket</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::S3::Bucket</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>BucketName</span>: [<span style=color:#ae81ff>BUCKET_NAME]</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>AccessControl</span>: <span style=color:#ae81ff>Private</span>
</span></span><span style=display:flex><span>      <span style=color:#75715e># WebsiteConfiguration: Use this option if you want to enable static web hosting</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>CloudResumeOutputArtifactBucketPolicy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>Type</span>: <span style=color:#ae81ff>AWS::S3::BucketPolicy</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>Properties</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>Bucket</span>: !<span style=color:#ae81ff>Ref CloudResumeOutputArtifactsBucket</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>PolicyDocument</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>Version</span>: <span style=color:#e6db74>&#34;2012-10-17&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>Statement</span>:
</span></span><span style=display:flex><span>          - <span style=color:#f92672>Action</span>:
</span></span><span style=display:flex><span>              - <span style=color:#e6db74>&#39;s3:GetObject&#39;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Effect</span>: <span style=color:#ae81ff>Allow</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Resource</span>: !<span style=color:#ae81ff>Join</span>
</span></span><span style=display:flex><span>              - <span style=color:#e6db74>&#39;&#39;</span>
</span></span><span style=display:flex><span>              - - <span style=color:#e6db74>&#39;arn:aws:s3:::&#39;</span>
</span></span><span style=display:flex><span>                - !<span style=color:#ae81ff>Ref CloudResumeOutputArtifactsBucket</span>
</span></span><span style=display:flex><span>                - <span style=color:#ae81ff>/*</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>Principal</span>:
</span></span><span style=display:flex><span>              <span style=color:#f92672>Service</span>: <span style=color:#e6db74>&#34;cloudfront.amazonaws.com&#34;</span> <span style=color:#75715e># only allow access from AWS CloudFront</span>
</span></span></code></pre></div><hr><ul class=pager><li class=previous><a href=/post/2023-03-23_cloud-resume-challenge-introduction/ data-toggle=tooltip data-placement=top title="The Cloud Resume Challenge, Part 1 - Introduction">&larr;
Previous Post</a></li><li class=next><a href=/post/2023-03-29_i-accidentally-deleted-very-important-data-and-introspection/ data-toggle=tooltip data-placement=top title="I Accidentally Deleted Important Data... What Happened and Introspection">Next
Post &rarr;</a></li></ul><div id=disqus-comment></div><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//https-marco-zhan-github-io.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container"><div class=side-catalog><hr class="hidden-sm hidden-xs"><h5><a class=catalog-toggle href=#>CATALOG</a></h5><ul class=catalog-body></ul></div></div><div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
sidebar-container"></div></div></div></article><footer><div class=container><div class=row><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center"><li><a href=mailto:yixiao5898@gmail.com><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://github.com/marco-zhan><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i></span></a></li><li><a target=_blank href=https://www.linkedin.com/in/marcozhan/><span class="fa-stack fa-lg"><i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i></span></a></li></ul><p class="copyright text-muted">Copyright &copy; Marco's Tech Blog 2023<br><a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> by <a href=https://zhaohuabing.com>Huabing</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe></p></div></div></div></footer><script>function loadAsync(e,t){var s=document,o="script",n=s.createElement(o),i=s.getElementsByTagName(o)[0];n.src=e,t&&n.addEventListener("load",function(e){t(null,e)},!1),i.parentNode.insertBefore(n,i)}</script><script>$("#tag_cloud").length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:"#bbbbee",end:"#0085a1"}},$("#tag_cloud a").tagcloud()})</script><script>loadAsync("https://cdn.jsdelivr.net/npm/fastclick@1.0.6/lib/fastclick.min.js",function(){var e=document.querySelector("nav");e&&FastClick.attach(e)})</script><script type=text/javascript>function generateCatalog(e){_containerSelector="div.post-container";var t,n,s,o,i,a=$(_containerSelector),r=a.find("h1,h2,h3,h4,h5,h6");return $(e).html(""),r.each(function(){t=$(this).prop("tagName").toLowerCase(),o="#"+$(this).prop("id"),n=$(this).text(),i=$('<a href="'+o+'" rel="nofollow">'+n+"</a>"),s=$('<li class="'+t+'_nav"></li>').append(i),$(e).append(s)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(e){e.preventDefault(),$(".side-catalog").toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$(".catalog-body").onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script></body></html>